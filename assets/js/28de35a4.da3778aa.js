"use strict";(self.webpackChunkmy_site=self.webpackChunkmy_site||[]).push([[543],{5228:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"payto-webhook","title":"PayTo Webhook","description":"Webhooks are used to notify your application of changes to the state of PayTo Agreements and PayTo Payments as and when they are processed through the system.","source":"@site/docs/payto-webhook.md","sourceDirName":".","slug":"/payto-webhook","permalink":"/docs/payto-webhook","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"payto-webhook","title":"PayTo Webhook","sidebar_label":"PayTo Webhook","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Create Payment","permalink":"/docs/pay-to/create-payment"},"next":{"title":"PayTo Glossary","permalink":"/docs/payto-glossary"}}');var r=n(4848),s=n(8453);const a={id:"payto-webhook",title:"PayTo Webhook",sidebar_label:"PayTo Webhook",sidebar_position:3},i="Webhook",d={},l=[{value:"Our Delivery Promises",id:"our-delivery-promises",level:2},{value:"Request ID",id:"request-id",level:2},{value:"PayTo Agreement Events",id:"payto-agreement-events",level:2},{value:"PayTo Payment Events",id:"payto-payment-events",level:2},{value:"Sample payload",id:"sample-payload",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"webhook",children:"Webhook"})}),"\n",(0,r.jsx)(t.p,{children:"Webhooks are used to notify your application of changes to the state of PayTo Agreements and PayTo Payments as and when they are processed through the system."}),"\n",(0,r.jsx)(t.p,{children:"By subscribing to our webhook events you can monitor the status of each agreement and payment in order to trigger the appropriate next steps."}),"\n",(0,r.jsx)(t.h2,{id:"our-delivery-promises",children:"Our Delivery Promises"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"We only consider a webhook event delivery as failed if we don't receive any success http response code (2xx, 3xx)."}),"\n",(0,r.jsx)(t.li,{children:"We will auto-retry failed deliveries every 5 minutes for 1 hour. (Note: In the sandbox environment, webhook deliveries will only be retried once, to allow for easier testing of failure scenarios.)"}),"\n",(0,r.jsx)(t.li,{children:"Delivery order for webhook events is not guaranteed."}),"\n",(0,r.jsx)(t.li,{children:"We guarantee at least 1 delivery attempt."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"request-id",children:"Request ID"}),"\n",(0,r.jsx)(t.p,{children:"We provide a Split-Request-ID header in the form of a UUID which uniquely identifies a webhook event."}),"\n",(0,r.jsx)(t.p,{children:"If the webhook event is retried/retransmitted, the UUID will remain the same. This allows you to check if a webhook event has been previously handled/processed."}),"\n",(0,r.jsx)(t.h2,{id:"payto-agreement-events",children:"PayTo Agreement Events"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Event Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_agreement.activated"}),(0,r.jsx)(t.td,{children:"The Debtor has accepted the Agreement."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_agreement.declined"}),(0,r.jsx)(t.td,{children:"The Debtor has declined the Agreement."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_agreement.expired"}),(0,r.jsx)(t.td,{children:"The Debtor has ignored the Agreement for 5 days."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_agreement.failed"}),(0,r.jsx)(t.td,{children:"The Agreement creation has failed."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_agreement.cancelled"}),(0,r.jsx)(t.td,{children:"The Debtor or Initiator has cancelled the Agreement."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"payto-payment-events",children:"PayTo Payment Events"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Event Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_payment.settled"}),(0,r.jsx)(t.td,{children:"A payment is settled once the funds have successfully cleared and settled from/to the nominated account."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_payment.failed"}),(0,r.jsx)(t.td,{children:"A payment has failed once the funds were not successfully debited or credited from/to the nominated account."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payto_payment.under_investigation"}),(0,r.jsx)(t.td,{children:"A payment enters the \u2018under investigation\u2019 state when the payer bank is not responding with a final payment status."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"sample-payload",children:"Sample payload"}),"\n",(0,r.jsx)(t.p,{children:"Once you register your webhook endpoint to Oligo, you will receive the POST webhook request with a payload similar to the following:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "data": {\n    "id": "01888a1b-cf5c-94d9-eea6-be9209e47197",\n    "body": {\n      "mms_agreement_id": "d1c34076e5r014301e8b2947d9322222"\n    },\n    "type": "payto_agreement.activated",\n    "published_at": "2020-05-05T15:15:15.150+10:00",\n    "resource_uid": "biz_agreement_000123",\n    "resource_type": "payto_agreement"\n  },\n  "links": {\n    "resource": "/payto/agreements/biz_agreement_000123"\n  }\n}\n'})})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var o=n(6540);const r={},s=o.createContext(r);function a(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);